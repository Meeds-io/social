<?xml version="1.0" encoding="UTF-8"?>
<!--

    Copyright (C) 2003-2011 eXo Platform SAS.

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program. If not, see <http://www.gnu.org/licenses/>.

-->
<configuration
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.exoplatform.org/xml/ns/kernel_1_2.xsd http://www.exoplatform.org/xml/ns/kernel_1_2.xsd"
        xmlns="http://www.exoplatform.org/xml/ns/kernel_1_2.xsd">
    
    <component>
        <key>org.exoplatform.services.organization.search.UserSearchService</key>
        <type>org.exoplatform.social.core.identity.SocialUserSearchServiceImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.common.lifecycle.LifeCycleCompletionService</key>
        <type>org.exoplatform.social.common.lifecycle.LifeCycleCompletionService</type>
        <init-params>
            <value-param>
                <name>thread-number</name>
                <value>10</value>
            </value-param>
            <value-param>
                <name>async-execution</name>
                <value>false</value>
            </value-param>
        </init-params>
    </component>
    
    <component>
        <key>org.exoplatform.social.common.service.thread.ThreadPoolConfig</key>
        <type>org.exoplatform.social.common.service.thread.ThreadPoolConfig</type>
        <init-params>
            <value-param>
                <name>pool-size</name>
                <value>5</value>
            </value-param>
            <value-param>
                <name>max-pool-size</name>
                <value>5</value>
            </value-param>
            <value-param>
                <name>async-mode</name>
                <value>true</value>
            </value-param>
            <value-param>
                <name>thread-priority</name>
                <value>5</value><!--10: HIGH, 5: NORMAL; 1: LOW-->
            </value-param>
        </init-params>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.storage.cache.SocialStorageCacheService</key>
        <type>org.exoplatform.social.core.storage.cache.SocialStorageCacheService</type>
    </component>
    
    <component>
        <type>org.exoplatform.commons.persistence.impl.EntityManagerService</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.StreamItemDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.StreamItemDAOImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.ConnectionDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.ConnectionDAOImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.ActivityDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.ActivityDAOImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.IdentityDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.IdentityDAOImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.SpaceDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.SpaceDAOImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.SpaceMemberDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.SpaceMemberDAOImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.UserSpaceBindingDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.UserSpaceBindingDAOImpl</type>
    </component>
    
    
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.GroupSpaceBindingDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.GroupSpaceBindingDAOImpl</type>
    </component>
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.GroupSpaceBindingQueueDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.GroupSpaceBindingQueueDAOImpl</type>
    </component>
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.GroupSpaceBindingReportActionDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.GroupSpaceBindingReportActionDAOImpl</type>
    </component>
    <component>
        <key>org.exoplatform.social.core.jpa.storage.dao.GroupSpaceBindingReportUserDAO</key>
        <type>org.exoplatform.social.core.jpa.storage.dao.jpa.GroupSpaceBindingReportUserDAOImpl</type>
    </component>
    <!--
      Identity storage components.
    -->
    <component>
        <type>org.exoplatform.social.core.jpa.storage.RDBMSIdentityStorageImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.storage.api.IdentityStorage</key>
        <type>org.exoplatform.social.core.storage.cache.CachedIdentityStorage</type>
    </component>
    
    <!--
      Relationship storage components.
    -->
    <component>
        <type>org.exoplatform.social.core.jpa.storage.RDBMSRelationshipStorageImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.storage.api.RelationshipStorage</key>
        <type>org.exoplatform.social.core.storage.cache.CachedRelationshipStorage</type>
    </component>
    
    <!--
      Activity storage components.
    -->
    
    <component>
        <type>org.exoplatform.social.core.jpa.storage.RDBMSActivityStorageImpl</type>
        <component-plugins>
            <component-plugin>
                <name>RDBMSActivityFileStoragePlugin</name>
                <set-method>addFileStoragePlugin</set-method>
                <type>org.exoplatform.social.core.jpa.storage.RDBMSActivityFileStoragePlugin</type>
                <description>FileService based activity attachment storage</description>
                <init-params>
                    <value-param>
                        <name>priority</name>
                        <description>the lowest priority as a fallback implementation</description>
                        <value>-1</value>
                    </value-param>
                    <value-param>
                        <name>datasource</name>
                        <description>An id of datasource name to identify this storage</description>
                        <value>file</value>
                    </value-param>
                </init-params>
            </component-plugin>
        </component-plugins>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.storage.api.ActivityStorage</key>
        <type>org.exoplatform.social.core.storage.cache.CachedActivityStorage</type>
    </component>
    
    <!--
      Space storage components.
    -->
    <component>
        <type>org.exoplatform.social.core.jpa.storage.RDBMSSpaceStorageImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.storage.api.SpaceStorage</key>
        <type>org.exoplatform.social.core.storage.cache.CachedSpaceStorage</type>
    </component>
    <!--
    GroupSpaceBinding storage components.
   -->
    <component>
        <key>org.exoplatform.social.core.storage.api.GroupSpaceBindingStorage</key>
        <type>org.exoplatform.social.core.jpa.storage.RDBMSGroupSpaceBindingStorageImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.manager.ActivityManager</key>
        <type>org.exoplatform.social.core.manager.ActivityManagerImpl</type>
        <component-plugins>
            <component-plugin>
                <name>OSHtmlSanitizer</name>
                <set-method>addProcessorPlugin</set-method>
                <type>org.exoplatform.social.core.processor.OSHtmlSanitizerProcessor</type>
                <init-params>
                    <value-param>
                        <name>priority</name>
                        <description>priority of this processor (lower are executed first)</description>
                        <value>4</value>
                    </value-param>
                </init-params>
            </component-plugin>
        </component-plugins>
        <init-params>
            <value-param>
                <name>upload.limit.size</name>
                <description>Define upload limit for uploaded files on Activity Stream</description>
                <value>${exo.social.activity.uploadLimit:}</value>
            </value-param>
            <value-param>
                <name>exo.edit.activity.enabled</name>
                <description>enable/disable edit activity</description>
                <value>${exo.edit.activity.enabled:true}</value>
            </value-param>
            <value-param>
                <name>exo.edit.comment.enabled</name>
                <description>enable/disable edit comment</description>
                <value>${exo.edit.comment.enabled:true}</value>
            </value-param>
            <value-param>
                <name>exo.manager.edit.activity.enabled</name>
                <description>enable/disable manger edit activity</description>
                <value>${exo.manager.edit.activity.enabled:true}</value>
            </value-param>
            <value-param>
                <name>exo.manager.edit.comment.enabled</name>
                <description>enable/disable manager edit comment</description>
                <value>${exo.manager.edit.comment.enabled:true}</value>
            </value-param>
        </init-params>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.identity.model.PropertiesDefinition</key>
        <type>org.exoplatform.social.core.identity.model.PropertiesDefinition</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.manager.RelationshipManager</key>
        <type>org.exoplatform.social.core.manager.RelationshipManagerImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.identity.IdentityProvider</key>
        <type>org.exoplatform.social.core.identity.provider.OrganizationIdentityProvider</type>
    </component>
    
    <component>
        <type>org.exoplatform.social.core.identity.provider.SpaceIdentityProvider</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.manager.IdentityManager</key>
        <type>org.exoplatform.social.core.manager.IdentityManagerImpl</type>
        <component-plugins>
            <component-plugin>
                <name>SpaceIdentityProvider plugin</name>
                <set-method>registerIdentityProviders</set-method>
                <type>org.exoplatform.social.core.identity.IdentityProviderPlugin</type>
                <init-params>
                    <values-param>
                        <name>providers</name>
                        <description>Identity Providers</description>
                        <value>org.exoplatform.social.core.identity.provider.SpaceIdentityProvider</value>
                    </values-param>
                </init-params>
            </component-plugin>
        </component-plugins>
        <init-params>
            <value-param>
                <name>upload.limit.size</name>
                <description>Define upload limit for uploaded files on Avatar and Banners</description>
                <value>${exo.social.identity.uploadLimit:}</value>
            </value-param>
            <value-param>
                <name>sort.field.name</name>
                <description>Identities sort field name</description>
                <value>${exo.social.identity.sort.field:lastname}</value>
            </value-param>
            <value-param>
                <name>sort.order.direction</name>
                <description>Identities sort direction</description>
                <value>${exo.social.identity.sort.direction:asc}</value>
            </value-param>
            <value-param>
                <name>firstChar.field.name</name>
                <description>Identities first char filtering field name</description>
                <value>${exo.social.identity.firstChar.field:lastname}</value>
            </value-param>
        </init-params>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.service.ProfileConfig</key>
        <type>org.exoplatform.social.core.service.ProfileConfig</type>
        <init-params>
            <values-param>
                <name>nodetype.emails</name>
                <value>exo:profileKeyValue</value>
            </values-param>
            <values-param>
                <name>nodetype.phones</name>
                <value>exo:profileKeyValue</value>
            </values-param>
            <values-param>
                <name>nodetype.ims</name>
                <value>exo:profileKeyValue</value>
            </values-param>
            <values-param>
                <name>nodetype.urls</name>
                <value>exo:profileKeyValue</value>
            </values-param>
            <values-param>
                <name>nodetype.address</name>
                <value>exo:profileAddress</value>
            </values-param>
            <values-param>
                <name>nodetype.experiences</name>
                <value>exo:profileExperience</value>
            </values-param>
            <values-param>
                <name>nodetype.education</name>
                <value>exo:profileEducation</value>
            </values-param>
            <values-param>
                <name>forceMultiValue</name>
                <value>xxxxxxxxxxxx</value>
            </values-param>
        </init-params>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.profile.ProfileMapper</key>
        <type>org.exoplatform.social.core.profile.ProfileMapper</type>
    </component>
    
    <!-- Space Configuration -->
    
    <component>
        <key>org.exoplatform.social.core.space.spi.SpaceService</key>
        <type>org.exoplatform.social.core.space.impl.SpaceServiceImpl</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.space.spi.SpaceTemplateService</key>
        <type>org.exoplatform.social.core.space.impl.SpaceTemplateServiceImpl</type>
        <init-params>
            <value-param>
                <name>defaultSpaceTemplate</name>
                <value>${exo.social.template.default:community}</value>
            </value-param>
        </init-params>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.space.SpacesAdministrationService</key>
        <type>org.exoplatform.social.core.space.impl.SpacesAdministrationServiceImpl</type>
        <init-params>
            <value-param>
                <name>social.spaces.administrators</name>
                <value>${social.spaces.administrators:}</value>
            </value-param>
            <value-param>
                <name>social.spaces.creators</name>
                <value>${social.spaces.creators:}</value>
            </value-param>
        </init-params>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.processor.I18NActivityProcessor</key>
        <type>org.exoplatform.social.core.processor.I18NActivityProcessor</type>
        <component-plugins>
            <component-plugin>
                <name>exosocial:spaces</name> <!-- activity type -->
                <set-method>addActivityResourceBundlePlugin</set-method>
                <type>org.exoplatform.social.core.processor.ActivityResourceBundlePlugin</type>
                <init-params>
                    <object-param>
                        <name>locale.social.Core</name> <!-- resource bundle key file -->
                        <description>activity key type resource bundle mapping for exosocial:spaces</description>
                        <object type="org.exoplatform.social.core.processor.ActivityResourceBundlePlugin">
                            <field name="activityKeyTypeMapping">
                                <map type="java.util.HashMap">
                                    <entry>
                                        <key><string>space_created</string></key>
                                        <value><string>SpaceActivityPublisher.space_created</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>manager_role_granted</string></key>
                                        <value><string>SpaceActivityPublisher.manager_role_granted</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>manager_role_revoked</string></key>
                                        <value><string>SpaceActivityPublisher.manager_role_revoked</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>has_joined</string></key>
                                        <value><string>SpaceActivityPublisher.has_joined</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>has_left</string></key>
                                        <value><string>SpaceActivityPublisher.has_left</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>user_joined</string></key>
                                        <value><string>SpaceActivityPublisher.user_joined</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>member_left</string></key>
                                        <value><string>SpaceActivityPublisher.member_left</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>space_renamed</string></key>
                                        <value><string>SpaceActivityPublisher.space_renamed</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>space_description_edited</string></key>
                                        <value><string>SpaceActivityPublisher.space_description_edited</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>space_avatar_edited</string></key>
                                        <value><string>SpaceActivityPublisher.space_avatar_edited</string></value>
                                    </entry>
                                </map>
                            </field>
                        </object>
                    </object-param>
                </init-params>
            </component-plugin>
            <component-plugin>
                <name>USER_ACTIVITIES_FOR_SPACE</name> <!-- activity type -->
                <set-method>addActivityResourceBundlePlugin</set-method>
                <type>org.exoplatform.social.core.processor.ActivityResourceBundlePlugin</type>
                <init-params>
                    <object-param>
                        <name>locale.social.Core</name> <!-- resource bundle key file -->
                        <description>activity key type resource bundle mapping for exosocial:spaces</description>
                        <object type="org.exoplatform.social.core.processor.ActivityResourceBundlePlugin">
                            <field name="activityKeyTypeMapping">
                                <map type="java.util.HashMap">
                                    <entry>
                                        <key><string>user_joined_public_space</string></key>
                                        <value><string>SpaceActivityPublisher.member_of_one_or_zero_public_space</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>user_joined_public_spaces</string></key>
                                        <value><string>SpaceActivityPublisher.member_of_number_public_spaces</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>user_space_joined</string></key>
                                        <value><string>SpaceActivityPublisher.user_space_joined</string></value>
                                    </entry>
                                </map>
                            </field>
                        </object>
                    </object-param>
                </init-params>
            </component-plugin>
            <component-plugin>
                <name>USER_ACTIVITIES_FOR_RELATIONSHIP</name> <!-- activity type -->
                <set-method>addActivityResourceBundlePlugin</set-method>
                <type>org.exoplatform.social.core.processor.ActivityResourceBundlePlugin</type>
                <init-params>
                    <object-param>
                        <name>locale.social.Core</name> <!-- resource bundle key file -->
                        <description>activity key type resource bundle mapping for relation's activities</description>
                        <object type="org.exoplatform.social.core.processor.ActivityResourceBundlePlugin">
                            <field name="activityKeyTypeMapping">
                                <map type="java.util.HashMap">
                                    <entry>
                                        <key><string>user_relations</string></key>
                                        <value><string>RelationshipPublisher.user_relations</string></value>
                                    </entry>
                                </map>
                            </field>
                        </object>
                    </object-param>
                </init-params>
            </component-plugin>
            <component-plugin>
                <name>USER_COMMENTS_ACTIVITY_FOR_RELATIONSHIP</name> <!-- activity type -->
                <set-method>addActivityResourceBundlePlugin</set-method>
                <type>org.exoplatform.social.core.processor.ActivityResourceBundlePlugin</type>
                <init-params>
                    <object-param>
                        <name>locale.social.Core</name> <!-- resource bundle key file -->
                        <description>activity key type resource bundle mapping for relation's activities</description>
                        <object type="org.exoplatform.social.core.processor.ActivityResourceBundlePlugin">
                            <field name="activityKeyTypeMapping">
                                <map type="java.util.HashMap">
                                    <entry>
                                        <key><string>user_relation_confirmed</string></key>
                                        <value><string>RelationshipPublisher.user_relation_confirmed</string></value>
                                    </entry>
                                </map>
                            </field>
                        </object>
                    </object-param>
                </init-params>
            </component-plugin>
            <component-plugin>
                <name>exosocial:people</name>
                <set-method>addActivityResourceBundlePlugin</set-method>
                <type>org.exoplatform.social.core.processor.ActivityResourceBundlePlugin</type>
                <init-params>
                    <object-param>
                        <name>locale.social.Core</name>
                        <description>activity key type resource bundle mapping for exosocial:people</description>
                        <object type="org.exoplatform.social.core.processor.ActivityResourceBundlePlugin">
                            <field name="activityKeyTypeMapping">
                                <map type="java.util.HashMap">
                                    <entry>
                                        <key><string>position_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.position_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>avatar_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.avatar_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>basic_info_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.basic_info_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>contact_section_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.contact_section_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>experience_section_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.experience_section_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>aboutMe_section_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.aboutMe_section_updated</string></value>
                                    </entry>
                                </map>
                            </field>
                        </object>
                    </object-param>
                </init-params>
            </component-plugin>
            <component-plugin>
                <name>USER_PROFILE_ACTIVITY</name>
                <set-method>addActivityResourceBundlePlugin</set-method>
                <type>org.exoplatform.social.core.processor.ActivityResourceBundlePlugin</type>
                <init-params>
                    <object-param>
                        <name>locale.social.Core</name>
                        <description>activity key type resource bundle mapping for USER_PROFILE_ACTIVITY</description>
                        <object type="org.exoplatform.social.core.processor.ActivityResourceBundlePlugin">
                            <field name="activityKeyTypeMapping">
                                <map type="java.util.HashMap">
                                    <entry>
                                        <key><string>position_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.position_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>avatar_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.avatar_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>basic_info_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.basic_info_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>contact_section_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.contact_section_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>experience_section_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.experience_section_updated</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>aboutMe_section_updated</string></key>
                                        <value><string>ProfileUpdatesPublisher.aboutMe_section_updated</string></value>
                                    </entry>
                                </map>
                            </field>
                        </object>
                    </object-param>
                </init-params>
            </component-plugin>
            <component-plugin>
                <name>SPACE_ACTIVITY</name> <!-- activity type -->
                <set-method>addActivityResourceBundlePlugin</set-method>
                <type>org.exoplatform.social.core.processor.ActivityResourceBundlePlugin</type>
                <init-params>
                    <object-param>
                        <name>locale.social.Core</name> <!-- resource bundle key file -->
                        <description>activity key type resource bundle mapping for space activity</description>
                        <object type="org.exoplatform.social.core.processor.ActivityResourceBundlePlugin">
                            <field name="activityKeyTypeMapping">
                                <map type="java.util.HashMap">
                                    <entry>
                                        <key><string>space_members</string></key>
                                        <value><string>SpaceActivityPublisher.members</string></value>
                                    </entry>
                                    <entry>
                                        <key><string>space_member</string></key>
                                        <value><string>SpaceActivityPublisher.member</string></value>
                                    </entry>
                                </map>
                            </field>
                        </object>
                    </object-param>
                </init-params>
            </component-plugin>
        </component-plugins>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.application.ProfileUpdatesPublisher</key>
        <type>org.exoplatform.social.core.application.ProfileUpdatesPublisher</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.application.RelationshipPublisher</key>
        <type>org.exoplatform.social.core.application.RelationshipPublisher</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.application.SpaceActivityPublisher</key>
        <type>org.exoplatform.social.core.application.SpaceActivityPublisher</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.space.SpaceTemplateStatisticsListenerPlugin</key>
        <type>org.exoplatform.social.core.space.SpaceTemplateStatisticsListenerPlugin</type>
    </component>
    
    <component>
        <key>org.exoplatform.social.core.profile.settings.UserProfileSettingsService</key>
        <type>org.exoplatform.social.core.profile.settings.UserProfileSettingsService</type>
        <component-plugins>
            <component-plugin>
                <name>profile-im-type-defaults</name>
                <set-method>addIMTypesPlugin</set-method>
                <type>org.exoplatform.social.core.profile.settings.IMTypesPlugin</type>
                <init-params>
                    <value-param>
                        <name>gtalk</name>
                        <value>Gtalk</value>
                    </value-param>
                    <value-param>
                        <name>msn</name>
                        <value>MSN</value>
                    </value-param>
                    <value-param>
                        <name>yahoo</name>
                        <value>Yahoo</value>
                    </value-param>
                    <value-param>
                        <name>skype</name>
                        <value>Skype</value>
                    </value-param>
                    <value-param>
                        <name>other</name>
                        <value>Other</value>
                    </value-param>
                </init-params>
            </component-plugin>
        </component-plugins>
    </component>
    
    <!-- GroupSpaceBinding service -->
    <component>
        <key>org.exoplatform.social.core.binding.spi.GroupSpaceBindingService</key>
        <type>org.exoplatform.social.core.binding.impl.GroupSpaceBindingServiceImpl</type>
    </component>
    
    <external-component-plugins>
        <target-component>org.exoplatform.services.resources.ResourceBundleService</target-component>
        <component-plugin>
            <name>Social Core Component Resource Bundle</name>
            <set-method>addResourceBundle</set-method>
            <type>org.exoplatform.services.resources.impl.BaseResourceBundlePlugin</type>
            <init-params>
                <values-param>
                    <name>classpath.resources</name>
                    <description>The resources that start with the following package name should be load from file system</description>
                    <value>locale.social.Core</value>
                </values-param>
                <values-param>
                    <name>portal.resource.names</name>
                    <description>The resources that start with the following package name should be load from file system</description>
                    <value>locale.social.Core</value>
                </values-param>
            </init-params>
        </component-plugin>
    </external-component-plugins>
    
    <external-component-plugins>
        <target-component>org.exoplatform.commons.upgrade.UpgradeProductService</target-component>
        <component-plugin>
            <name>EditActivityNotificationSettingsUpgradePlugin</name>
            <set-method>addUpgradePlugin</set-method>
            <type>org.exoplatform.social.core.updater.EditActivityNotificationSettingsUpgradePlugin</type>
            <description>eXo Social Edit Activity Notification Upgrade Updater</description>
            <init-params>
                <value-param>
                    <name>product.group.id</name>
                    <description>The groupId of the product</description>
                    <value>org.exoplatform.social</value>
                </value-param>
                <value-param>
                    <name>plugin.execution.order</name>
                    <description>The plugin execution order</description>
                    <value>1</value>
                </value-param>
                <value-param>
                    <name>plugin.upgrade.execute.once</name>
                    <description>Execute this upgrade plugin only once</description>
                    <value>true</value>
                </value-param>
                <value-param>
                    <name>plugin.upgrade.target.version</name>
                    <description>Target version of the plugin</description>
                    <value>5.2.0</value>
                </value-param>
                <value-param>
                    <name>plugin.upgrade.async.execution</name>
                    <description>Execute this upgrade asynchronously</description>
                    <value>true</value>
                </value-param>
            </init-params>
        </component-plugin>
    </external-component-plugins>
    
    <external-component-plugins>
        <target-component>org.exoplatform.social.core.space.spi.SpaceService</target-component>
        <component-plugin>
            <name>SpaceActivityPublisher</name>
            <set-method>addSpaceListener</set-method>
            <type>org.exoplatform.social.core.application.SpaceActivityPublisher</type>
        </component-plugin>
        <component-plugin>
            <name>SpaceTemplateStatisticsListenerPlugin</name>
            <set-method>addSpaceListener</set-method>
            <type>org.exoplatform.social.core.space.SpaceTemplateStatisticsListenerPlugin</type>
        </component-plugin>
        
        <component-plugin>
            <name>portlets.prefs.required</name>
            <set-method>setPortletsPrefsRequired</set-method>
            <type>org.exoplatform.social.core.application.PortletPreferenceRequiredPlugin</type>
            <init-params>
                <values-param>
                    <name>portletsPrefsRequired</name>
                    <value>SpaceActivityStreamPortlet</value>
                    <value>SpaceSettingPortlet</value>
                    <value>MembersPortlet</value>
                </values-param>
            </init-params>
        </component-plugin>
    </external-component-plugins>
    
    <external-component-plugins>
        <target-component>org.exoplatform.portal.config.UserACL</target-component>
        <component-plugin>
            <name>space_creation_invitation</name>
            <set-method>addGroupVisibilityPlugin</set-method>
            <type>org.exoplatform.social.webui.SpaceCreationInvitationGroupVisibilityPlugin</type>
        </component-plugin>
    </external-component-plugins>

    <external-component-plugins>
        <target-component>org.exoplatform.social.core.space.spi.SpaceService</target-component>
        <component-plugin>
            <name>SpaceRenamedListenerImpl</name>
            <set-method>addSpaceListener</set-method>
            <type>org.exoplatform.social.core.space.impl.SpaceRenamedListenerImpl</type>
        </component-plugin>
    </external-component-plugins>

    <external-component-plugins>
        <target-component>org.exoplatform.services.organization.OrganizationService</target-component>
        <component-plugin>
            <name>space.binding.group.event.listener</name>
            <set-method>addListenerPlugin</set-method>
            <type>org.exoplatform.social.core.binding.listener.SpaceBindingGroupEventListener</type>
            <description>Remove group binding when group is deleted</description>
        </component-plugin>
        <component-plugin>
            <name>space.binding.membership.event.listener</name>
            <set-method>addListenerPlugin</set-method>
            <type>org.exoplatform.social.core.binding.listener.SpaceBindingMembershipGroupEventListener</type>
            <description>Add remove user space binding when user join/leave a group</description>
        </component-plugin>
        <component-plugin>
            <name>space.binding.user.event.listener</name>
            <set-method>addListenerPlugin</set-method>
            <type>org.exoplatform.social.core.binding.listener.SpaceBindingUserEventListener</type>
            <description>Remove user space binding when user is deleted</description>
        </component-plugin>
    </external-component-plugins>
    
    
    <external-component-plugins>
        <target-component>org.exoplatform.services.scheduler.JobSchedulerService</target-component>
        <component-plugin profiles="all">
            <name>AddCronJob</name>
            <set-method>addCronJob</set-method>
            <type>org.exoplatform.services.scheduler.CronJob</type>
            <description>Job to treat GroupSpaceBinding Queue</description>
            <init-params>
                <properties-param>
                    <name>cronjob.info</name>
                    <description>Configuration for queue messages processing</description>
                    <property name="jobName" value="QueueGroupSpaceBindingJob"/>
                    <property name="groupName" value="GroupSpaceBinding"/>
                    <property name="job" value="org.exoplatform.social.core.binding.job.QueueGroupSpaceBindingJob"/>
                    <property name="expression" value="${exo.social.QueueGroupSpaceBindingJob.expression:0 0/5 * * * ?}"/>
                    <!-- Runs every 5 minutes -->
                </properties-param>
            </init-params>
        </component-plugin>
    </external-component-plugins>

</configuration>
